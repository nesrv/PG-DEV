
![alt text](image.png)


![alt text](image-1.png)



![alt text](image-2.png)



![alt text](image-3.png)



---

### üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ PostgreSQL

–†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ PostgreSQL –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç **8 –∫–∏–ª–æ–±–∞–π—Ç**. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å ‚Äî **–¥–æ 32 –ö–ë**, ‚Äî –Ω–æ **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Å–µ—Ä–≤–µ—Ä–∞**, —Ç–æ –µ—Å—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî **—Ç–∞–±–ª–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã –∏ –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã**, –∫–æ—Ç–æ—Ä—ã–µ PostgreSQL –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ–±—â–∏–º —Ç–µ—Ä–º–∏–Ω–æ–º **relation** ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–æ–¥–∏–Ω–∞–∫–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü**. –≠—Ç–æ –≤–∞–∂–Ω–æ: **–µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–±—â–∏–π –±—É—Ñ–µ—Ä–Ω—ã–π –∫—ç—à**, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –ø–æ–≤—ã—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –ø–∞–º—è—Ç—å—é.

---

### üîç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å **–∑–∞–≥–æ–ª–æ–≤–∫–∞** –æ–±—ä—ë–º–æ–º **24 –±–∞–π—Ç–∞**. –í –Ω—ë–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

* –°–ª—É–∂–µ–±–Ω—ã–µ —Ñ–ª–∞–≥–∏;
* –°–º–µ—â–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç–µ–π –¥–∞–Ω–Ω—ã—Ö;
* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–≤–æ–±–æ–¥–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ;
* –†–∞–∑–º–µ—Ä—ã –∫–ª—é—á–µ–≤—ã—Ö –∑–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

---

### üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

1. **–ú–∞—Å—Å–∏–≤ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π (ItemIdData)**

   * –ö–∞–∂–¥—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç **—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä ‚Äî 4 –±–∞–π—Ç–∞**.
   * –≠—Ç–∏ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –æ–±—Ä–∞–∑—É—é—Ç –º–∞—Å—Å–∏–≤, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π PostgreSQL –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ö—Ä–∞–Ω–∏–º—ã–º —Å—Ç—Ä–æ–∫–∞–º.
   * –ü–æ–∑–∏—Ü–∏—è —É–∫–∞–∑–∞—Ç–µ–ª—è –≤ –º–∞—Å—Å–∏–≤–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **tuple ID** ‚Äî `tid`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö.
   * –£–∫–∞–∑–∞—Ç–µ–ª–∏ **—Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏**, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–µ **–≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**.

2. **–í–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫ (tuples)**

   * –≠—Ç–æ —Å–∞–º–∏ **–¥–∞–Ω–Ω—ã–µ**, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö—Ä–∞–Ω–∏–º –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö.
   * –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è **–∑–∞–≥–æ–ª–æ–≤–∫–æ–º**, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é: –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è MVCC, —Ñ–ª–∞–≥–∏ –∏ –ø—Ä.
   * –í —Ç–µ—Ä–º–∏–Ω–∞—Ö PostgreSQL —Å—Ç—Ä–æ–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **tuple** (—Ç—é–ø–ª). –ò–Ω–æ–≥–¥–∞ –µ—ë —Ç–∞–∫ –∏ –Ω–∞–∑—ã–≤–∞—é—Ç ‚Äî ¬´–≤–µ—Ä—Å–∏—è —Å—Ç—Ä–æ–∫–∏¬ª.

3. **–°–≤–æ–±–æ–¥–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ (Free Space)**

   * –†–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –º–µ–∂–¥—É —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –∏ —Å—Ç—Ä–æ–∫–∞–º–∏.
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–∞—Ö –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö: PostgreSQL —Å—Ç–∞—Ä–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫ **–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**, –µ—Å–ª–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ.
   * –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é –∏ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

4. **–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å (Special Space)**

   * –ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∏–Ω–¥–µ–∫—Å–æ–≤**, –Ω–∞–ø—Ä–∏–º–µ—Ä, GiST –∏ GIN, –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.
   * –í —Ç–∞–±–ª–∏—Ü–∞—Ö –∏ B-–¥–µ—Ä–µ–≤—å—è—Ö (B-Tree) —ç—Ç–∞ –æ–±–ª–∞—Å—Ç—å –æ–±—ã—á–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

5. **–ù—É–ª–µ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Page 0)**

   * –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **—Å–ª—É–∂–µ–±–Ω—ã—Ö —Ü–µ–ª–µ–π** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥–∞—Ö –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–∞—Ö.

---

### üß† –ü–æ—á–µ–º—É —Ç–∞–∫–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è?

* **–ö–æ—Å–≤–µ–Ω–Ω–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è** (—á–µ—Ä–µ–∑ –º–∞—Å—Å–∏–≤ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π) —É–¥–æ–±–Ω–∞:

  * –ù–µ –Ω—É–∂–Ω–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ –Ω—É–∂–Ω–æ–º—É `tid`.
  * –ú–æ–∂–Ω–æ **–ø–µ—Ä–µ–º–µ—â–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–∂–∞—Ç–∏–∏ –∏–ª–∏ –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏) ‚Äî **–Ω–µ –Ω–∞—Ä—É—à–∞—è —Å—Å—ã–ª–æ–∫ –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö**.

* –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–º–æ–≥–∞–µ—Ç PostgreSQL —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö –∏ –∞–∫—Ç–∏–≤–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

---

üìé *–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:*
[https://postgrespro.ru/docs/postgresql/16/storage-page-layout](https://postgrespro.ru/docs/postgresql/16/storage-page-layout)

---


![alt text](image-4.png)



### üìê –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ –∏ –µ–≥–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫

–í–æ –º–Ω–æ–≥–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤, –≤ —Ç–æ–º —á–∏—Å–ª–µ –≤ x86 –∏ x86\_64, **–ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º –º–∞—à–∏–Ω–Ω—ã—Ö —Å–ª–æ–≤**. –≠—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–æ –∫–∞–∫ —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, —Ç–∞–∫ –∏ —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ CPU.

#### üîπ –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?

* –ù–∞ **32-–±–∏—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, x86):

  * –ó–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∞ `integer` (4 –±–∞–π—Ç–∞) –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ **4-–±–∞–π—Ç–Ω—ã–º –≥—Ä–∞–Ω–∏—Ü–∞–º**.
  * –ó–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–∞ `double precision` (8 –±–∞–π—Ç) —Ç–∞–∫–∂–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ **4-–±–∞–π—Ç–Ω—ã–º –≥—Ä–∞–Ω–∏—Ü–∞–º**, –Ω–æ –±—É–¥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å **–¥–≤–µ —Ç–∞–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥—Ä—è–¥**.

* –ù–∞ **64-–±–∏—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ** (x86\_64):

  * –ó–Ω–∞—á–µ–Ω–∏—è `double precision` –±—É–¥—É—Ç —É–∂–µ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞—Ç—å—Å—è –ø–æ **8-–±–∞–π—Ç–Ω—ã–º –≥—Ä–∞–Ω–∏—Ü–∞–º**, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —à–∏—Ä–∏–Ω–æ–π –º–∞—à–∏–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞.

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –ø–æ–ª—è–º–∏ –º–æ–≥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è **–∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ ‚Äî padding-–±–∞–π—Ç—ã**, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

---

### üìè –ö–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü –≤ PostgreSQL?

–†–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –∑–∞–≤–∏—Å–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –æ—Ç **—Å–∞–º–∏—Ö –¥–∞–Ω–Ω—ã—Ö**, –Ω–æ –∏ –æ—Ç **–ø–æ—Ä—è–¥–∫–∞ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π**. –≠—Ç–æ –≤–∞–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä—ë–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

#### üî∏ –ü—Ä–∏–º–µ—Ä:

–ï—Å–ª–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ —á–µ—Ä–µ–¥—É—é—Ç—Å—è –ø–æ–ª—è:

```sql
char(1), integer, char(1), integer
```

–¢–æ –º–µ–∂–¥—É `char(1)` –∏ `integer` –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å—Å—è **–ø–æ 3 –±–∞–π—Ç–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è**, —á—Ç–æ–±—ã integer –ø–æ–ø–∞–¥–∞–ª –Ω–∞ 4-–±–∞–π—Ç–Ω—É—é –≥—Ä–∞–Ω–∏—Ü—É.

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:

* –ö–∞–∂–¥–æ–µ —Ç–∞–∫–æ–µ ¬´–≤–ø–ª–µ—Ç–µ–Ω–∏–µ¬ª char+int –ø–æ—Ç—Ä–µ–±—É–µ—Ç –Ω–µ 5 –±–∞–π—Ç, –∞ **8 –±–∞–π—Ç**.
* –ù–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö –∏–ª–∏ –≤ –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö —ç—Ç–æ –º–æ–∂–µ—Ç **–≤ –¥–≤–∞ —Ä–∞–∑–∞ —É–≤–µ–ª–∏—á–∏—Ç—å –æ–±—ä—ë–º –∑–∞–Ω–∏–º–∞–µ–º–æ–π –ø–∞–º—è—Ç–∏**.

---

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

**–†–∞—Å–ø–æ–ª–∞–≥–∞–π—Ç–µ –ø–æ–ª—è –≤ –ø–æ—Ä—è–¥–∫–µ —É–±—ã–≤–∞–Ω–∏—è –∏—Ö —Ä–∞–∑–º–µ—Ä–∞.**

–ù–∞–ø—Ä–∏–º–µ—Ä:

```sql
double precision,
integer,
smallint,
char(1)
```

–¢–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫:

* –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤–æ –≤—Å—Ç–∞–≤–∫–µ –ø—É—Å—Ç—ã—Ö –±–∞–π—Ç–æ–≤,
* –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏,
* –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∫—ç—à–∞.

---

### ‚öôÔ∏è PostgreSQL –∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ

PostgreSQL —Å—Ç–∞—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–ª—é–¥–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—é. –û–¥–Ω–∞–∫–æ:

* –û–Ω **–Ω–µ –ø–µ—Ä–µ–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–µ—Ç –ø–æ–ª—è** ‚Äî —ç—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ —Å–æ–≤–µ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.
* –ü–æ—ç—Ç–æ–º—É **–ø–ª–æ—Ö–æ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ "—Ä–∞–∑–¥—É–≤–∞–Ω–∏—é" —Å—Ç—Ä–æ–∫**.

–û—Å–æ–±–µ–Ω–Ω–æ —ç—Ç–æ –≤–∞–∂–Ω–æ –ø—Ä–∏:

* –í—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç–µ —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏,
* –ë–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Ç—Ä–æ–∫,
* –¢–∞–±–ª–∏—Ü–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∞–∫—Ç–∏–≤–Ω–æ –∫—ç—à–∏—Ä—É—é—Ç—Å—è.

---

üìé –ü–æ–¥—Ä–æ–±–Ω–æ —ç—Ç–∞ —Ç–µ–º–∞ —Ä–∞—Å–∫—Ä—ã—Ç–∞ –≤ –¥–æ–∫–ª–∞–¥–µ:
[¬´Tuple Internals¬ª, PGConf.ru (PDF)](https://pgconf.ru/media/2016/05/13/tuple-internals-ru.pdf)

---



![alt text](image-5.png)



# üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã PostgreSQL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `pageinspect`

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```sql
=> CREATE DATABASE arch_mvcc;
CREATE DATABASE
```

```sql
=> \c arch_mvcc
You are now connected to database "arch_mvcc" as user "student".
```

–°–æ–∑–¥–∞–¥–∏–º —Ç–∞–±–ª–∏—Ü—É –∏ –∏–Ω–¥–µ–∫—Å –ø–æ –æ–¥–Ω–æ–º—É –∏–∑ –ø–æ–ª–µ–π:

```sql
=> CREATE TABLE t(
  id integer,
  s text
);
CREATE TABLE
```

```sql
=> CREATE INDEX t_s on t(s);
CREATE INDEX
```

```sql
=> INSERT INTO t(id, s) VALUES (42, 'FOO');
INSERT 0 1
```

---

## üìñ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–ß—Ç–æ–±—ã –∏–∑—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –≤–µ—Ä—Å–∏–π —Å—Ç—Ä–æ–∫, –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `pageinspect`.

```sql
=> CREATE EXTENSION pageinspect;
CREATE EXTENSION
```

–ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø–æ–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –µ—ë –æ–±–ª–∞—Å—Ç–µ–π:

```sql
=> SELECT lower, upper, special, pagesize
FROM page_header(get_raw_page('t',0));
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

```
 lower | upper | special | pagesize 
-------+-------+---------+----------
    28 |  8160 |    8192 |     8192
(1 row)
```

---

## üß≠ –û–±–ª–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–û–±–ª–∞—Å—Ç–∏ –∑–∞–Ω–∏–º–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∞–¥—Ä–µ—Å–æ–≤:

* `0` ‚Äî –Ω–∞—á–∞–ª–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫
* `lower` ‚Äî –Ω–∞—á–∞–ª–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
* `upper` ‚Äî –Ω–∞—á–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö (–≤–µ—Ä—Å–∏–π —Å—Ç—Ä–æ–∫)
* `special` ‚Äî –Ω–∞—á–∞–ª–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤)
* `pagesize` ‚Äî –∫–æ–Ω–µ—Ü —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---



![alt text](image-6.png)


# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–µ—Ä—Å–∏–π —Å—Ç—Ä–æ–∫ (tuples) –≤ PostgreSQL

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫ (tuples) –∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ –Ω–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ.

–ù–∞—á–Ω–µ–º —Å–æ –≤—Å—Ç–∞–≤–∫–∏.

–í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ ‚Äî —Ç–∞–±–ª–∏—Ü–∞ —Å –¥–≤—É–º—è —Å—Ç–æ–ª–±—Ü–∞–º–∏ (—á–∏—Å–ª–æ –∏ —Ç–µ–∫—Å—Ç).
–ü—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–∞–±–ª–∏—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (heap page) –ø–æ—è–≤–∏—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å —Å –Ω–æ–º–µ—Ä–æ–º 1, —Å—Å—ã–ª–∞—é—â–∏–π—Å—è –Ω–∞ –ø–µ—Ä–≤—É—é –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Å—Ç—Ä–æ–∫–∏.

–ö–∞–∂–¥—ã–π —Ç–∞–∫–æ–π —É–∫–∞–∑–∞—Ç–µ–ª—å –ø–æ–º–∏–º–æ —Å—Å—ã–ª–∫–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–ª–∏–Ω—É –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫–∏ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∏—Ç, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –µ–µ —Å—Ç–∞—Ç—É—Å.

---

## –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫–∏

–í–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫ –∫—Ä–æ–º–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –¥–∞–Ω–Ω—ã—Ö –∏–º–µ—é—Ç —Ç–∞–∫–∂–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∑–∞–Ω–∏–º–∞—é—â–∏–π –º–∏–Ω–∏–º—É–º 23 –±–∞–π—Ç–∞.
–ü–æ–º–∏–º–æ –ø—Ä–æ—á–µ–≥–æ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç:

* **xmin –∏ xmax** ‚Äî –ø–æ–ª—è, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å –¥–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∏ –∫–æ–Ω–µ—á–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π;
* **–ö–∞—Ä—Ç—É –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π** (–≤ –Ω–µ–π –æ—Ç–º–µ—á–µ–Ω—ã –ø–æ–ª—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `NULL`);
* **–†—è–¥ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤**, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π `xmin` –∏ `xmax`, –µ—Å–ª–∏ –æ–Ω —É–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω (–∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∏–ª–∏ –æ–±–æ—Ä–≤–∞–Ω—ã).

---

## –ü—Ä–∏–º–µ—Ä

–í –Ω–∞—à–µ–π –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫–∏ –ø–æ–ª–µ `xmin` –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –Ω–æ–º–µ—Ä–æ–º —Ç–µ–∫—É—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (**100**).

–ü–æ—Å–∫–æ–ª—å–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ—â–µ –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª–∏—Å—å –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞, —Ç–æ –≤ –∂—É—Ä–Ω–∞–ª–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (**CLOG**) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–ø–∏—Å—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –Ω—É–ª—è–º–∏.

CLOG –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±–µ –∫–∞–∫ –º–∞—Å—Å–∏–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–ª—è –∫–∞–∂–¥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–Ω–∞—á–∏–Ω–∞—è —Å –Ω–µ–∫–æ—Ç–æ—Ä–æ–π) –æ—Ç–≤–æ–¥–∏—Ç—Å—è —Ä–æ–≤–Ω–æ –¥–≤–∞ –±–∏—Ç–∞.

–ü–æ–ª–µ `xmax` –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —Ñ–∏–∫—Ç–∏–≤–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º **0**.
–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –±—É–¥—É—Ç –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —ç—Ç–æ—Ç –Ω–æ–º–µ—Ä, –ø–æ—Å–∫–æ–ª—å–∫—É —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏–∑–Ω–∞–∫, —á—Ç–æ —ç—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–æ–±–æ—Ä–≤–∞–Ω–∞**.

---

![alt text](image-7.png)


–í–æ—Ç –≤–∞—à —Ç–µ–∫—Å—Ç, –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–π –≤ **—Ñ–æ—Ä–º–∞—Ç–µ Markdown** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è:

---

## –ò–Ω–¥–µ–∫—Å B-–¥–µ—Ä–µ–≤–æ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–ü—É—Å—Ç—å —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å B-–¥–µ—Ä–µ–≤–æ, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –ø–æ–ª—é.
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∏–Ω–¥–µ–∫—Å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –∏–Ω–¥–µ–∫—Å–∞.
–ò –¥–∞–∂–µ —É –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏–Ω–¥–µ–∫—Å–∞ –±—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –≤–∏–¥—ã —Å—Ç—Ä–∞–Ω–∏—Ü. –ù–∞–ø—Ä–∏–º–µ—Ä, —É B-–¥–µ—Ä–µ–≤–∞ –µ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏, —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ª–∏—Å—Ç–æ–≤—ã—Ö –∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —É–∑–ª–æ–≤.

–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –æ–±—ã—á–Ω–æ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏–º–µ–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –∏ –∏–Ω–¥–µ–∫—Å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –≤–µ—Ä—Å–∏—è–º —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ).

–ò–Ω–¥–µ–∫—Å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Ç–æ–∂–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –æ—á–µ–Ω—å —Ä–∞–∑–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∏–Ω–¥–µ–∫—Å–∞.
–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è B-–¥–µ—Ä–µ–≤–∞ –∑–∞–ø–∏—Å–∏ –≤ –ª–∏—Å—Ç–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —Å–æ–¥–µ—Ä–∂–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–ª—é—á–∞ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å—Å—ã–ª–∫—É (ctid) –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–æ–∫—É —Ç–∞–±–ª–∏—Ü—ã (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ B-–¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç—Å—è –≤ —Ç–µ–º–µ ¬´–ö–ª–∞—Å—Å—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤¬ª –∏ –≤ —É—á–µ–±–Ω–æ–º –∫—É—Ä—Å–µ QPT ¬´–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤¬ª).

–í –æ–±—â–µ–º —Å–ª—É—á–∞–µ –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç—Ä–æ–µ–Ω —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–æ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –æ–Ω –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫.

–í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ –≤ –∏–Ω–¥–µ–∫—Å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å —Å –Ω–æ–º–µ—Ä–æ–º 1, –∫–æ—Ç–æ—Ä—ã–π —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –∏–Ω–¥–µ–∫—Å–Ω—É—é –∑–∞–ø–∏—Å—å, –∫–æ—Ç–æ—Ä–∞—è, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ç–∞–±–ª–∏—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.
–ß—Ç–æ–±—ã –Ω–µ –∑–∞–≥—Ä–æ–º–æ–∂–¥–∞—Ç—å —Ä–∏—Å—É–Ω–æ–∫, —É–∫–∞–∑–∞—Ç–µ–ª—å –∏ —Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã.

---

## –í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç

–ù–∏–∫–∞–∫–æ–π –∏–Ω–¥–µ–∫—Å –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç–∏ (–Ω–µ—Ç –ø–æ–ª–µ–π `xmin` –∏ `xmax`).
–ü—Ä–æ—á–∏—Ç–∞–≤ –∏–Ω–¥–µ–∫—Å–Ω—É—é –∑–∞–ø–∏—Å—å, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–µ –≤–∏–¥–∏–º–æ—Å—Ç—å, –Ω–µ –∑–∞–≥–ª—è–Ω—É–≤ –≤ —Ç–∞–±–ª–∏—á–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É (–¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–ª—É–∂–∏—Ç –∫–∞—Ä—Ç–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏).

---



![alt text](image-8.png)


---

## –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ —Ä–æ–ª—å CLOG

–ö–æ–≥–¥–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è, –≤ **CLOG** –¥–ª—è —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–∑–Ω–∞–∫ `committed`.
–≠—Ç–æ, –ø–æ —Å—É—Ç–∏, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (–Ω–µ —Å—á–∏—Ç–∞—è –∂—É—Ä–Ω–∞–ª–∞ –ø—Ä–µ–¥–∑–∞–ø–∏—Å–∏), –∫–æ—Ç–æ—Ä–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

–ö–æ–≥–¥–∞ –∫–∞–∫–∞—è-–ª–∏–±–æ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ–±—Ä–∞—Ç–∏—Ç—Å—è –∫ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫–∏, –µ–π –ø—Ä–∏–¥–µ—Ç—Å—è –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:

1. –ó–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è 100
   (–Ω–∞–¥–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π; —Ç–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –æ–±—â–µ–π –ø–∞–º—è—Ç–∏ –∏–º–µ–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ **ProcArray**),

2. –ê –µ—Å–ª–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å, —Ç–æ —Ñ–∏–∫—Å–∞—Ü–∏–µ–π –∏–ª–∏ –æ—Ç–º–µ–Ω–æ–π
   (—Å–≤–µ—Ä–∏—Ç—å—Å—è —Å **CLOG**).

–ü–æ—Å–∫–æ–ª—å–∫—É –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ CLOG –∫–∞–∂–¥—ã–π —Ä–∞–∑ –Ω–∞–∫–ª–∞–¥–Ω–æ, –≤—ã—è—Å–Ω–µ–Ω–Ω—ã–π –æ–¥–Ω–∞–∂–¥—ã —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ **–±–∏—Ç—ã-–ø–æ–¥—Å–∫–∞–∑–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫–∏**.

–ï—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ —ç—Ç–∏—Ö –±–∏—Ç–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ `xmin` —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑–≤–µ—Å—Ç–Ω—ã–º, –∏ —Å–ª–µ–¥—É—é—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —É–∂–µ –Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ **CLOG**.

---

## –ü–æ—á–µ–º—É –Ω–µ –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Å–∞–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è?

–ü–æ—á–µ–º—É —ç—Ç–∏ –±–∏—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–ª–∞ –≤—Å—Ç–∞–≤–∫—É?

* –í –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∏–ª–∏ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è, —É–∂–µ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–∞–∫–∏—Ö –∏–º–µ–Ω–Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É—Å–ø–µ–ª–∞ –ø–æ–º–µ–Ω—è—Ç—å.
* –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —á–∞—Å—Ç—å —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã—Ç–µ—Å–Ω–µ–Ω–∞ –∏–∑ –±—É—Ñ–µ—Ä–Ω–æ–≥–æ –∫–µ—à–∞ –Ω–∞ –¥–∏—Å–∫.
* –ß–∏—Ç–∞—Ç—å –∏—Ö –∑–∞–Ω–æ–≤–æ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –±–∏—Ç—ã, –æ–∑–Ω–∞—á–∞–ª–æ –±—ã —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –∑–∞–º–µ–¥–ª–∏—Ç—å —Ñ–∏–∫—Å–∞—Ü–∏—é.

---

## –û–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞

–û–±—Ä–∞—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ –ª—é–±–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è (–¥–∞–∂–µ –≤—ã–ø–æ–ª–Ω—è—é—â–∞—è –ø—Ä–æ—Å—Ç–æ–µ —á—Ç–µ–Ω–∏–µ ‚Äî `SELECT`) –º–æ–∂–µ—Ç –∑–∞–≥—Ä—è–∑–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –±—É—Ñ–µ—Ä–Ω–æ–º –∫–µ—à–µ –∏ –ø–æ—Ä–æ–¥–∏—Ç—å –Ω–æ–≤—ã–µ –∂—É—Ä–Ω–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏.

---



![alt text](image-9.png)


---

## –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∏ —Ä–æ–ª—å `xmax`

```
    11 xmax xmin –¥–∞–Ω–Ω—ã–µ
    100 42,FOO
    –£–¥–∞–ª–µ–Ω–∏–µ 100 committed aborted
    ctid –∫–ª—é—á
    (0,1) FOO (0,1)
    t101 –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫–∏
```

---

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫–∏ –≤ –ø–æ–ª–µ **xmax** —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–π —É–¥–∞–ª—è—é—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∞ –ø—Ä–∏–∑–Ω–∞–∫ –æ–±–æ—Ä–≤–∞–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è.
–ë–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

---

## –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏

–ó–∞–º–µ—Ç–∏–º, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `xmax`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ **–∞–∫—Ç–∏–≤–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** (—á—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –ø–æ **ProcArray**), –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ **–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**.

–ï—Å–ª–∏ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–∞–º–µ—Ä–µ–Ω–∞ **–æ–±–Ω–æ–≤–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å** —ç—Ç—É —Å—Ç—Ä–æ–∫—É, –æ–Ω–∞ –±—É–¥–µ—Ç –≤—ã–Ω—É–∂–¥–µ–Ω–∞ –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ `xmax`.

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –≤ —Ç–µ–º–µ **¬´–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏¬ª** —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è.
–ü–æ–∫–∞ –æ—Ç–º–µ—Ç–∏–º —Ç–æ–ª—å–∫–æ, —á—Ç–æ **—á–∏—Å–ª–æ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å—Ç—Ä–æ–∫ –Ω–∏—á–µ–º –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ**.
–û–Ω–∏ –Ω–µ –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –Ω–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—Ä–∞–∑—É–º–µ–µ—Ç—Å—è, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–æ–≥–æ, —á—Ç–æ –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –æ–±—Ä–∞—Ç–∏–≤—à–∏–π—Å—è –∫ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫–∏, –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–∞–≤–∏—Ç—å **–±–∏—Ç—ã-–ø–æ–¥—Å–∫–∞–∑–∫–∏**).

---



![alt text](image-10.png)


–í–æ—Ç –≤–∞—à —Ç–µ–∫—Å—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown, –∫–∞–∫ –≤—ã –ø—Ä–æ—Å–∏–ª–∏ ‚Äî –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–∏:

---

## –û—Ç–º–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```
    12 xmax xmin –¥–∞–Ω–Ω—ã–µ
    –û—Ç–º–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    100 42,FOO
    100 committed aborted
    ctid –∫–ª—é—á
    (0,1) FOO (0,1)
    t101
    101 –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å—Ç—Ä–æ–∫–µ –¥—Ä—É–≥–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π t
```

---

**–û—Ç–º–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π** —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ **—Ñ–∏–∫—Å–∞—Ü–∏–∏**, —Ç–æ–ª—å–∫–æ –≤ **CLOG** –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è **–±–∏—Ç –æ–±–æ—Ä–≤–∞–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.
–û—Ç–º–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–∞–∫ –∂–µ –±—ã—Å—Ç—Ä–æ, –∫–∞–∫ –∏ —Ñ–∏–∫—Å–∞—Ü–∏—è ‚Äî –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ—Ç–∫–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.

---

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã

–ù–æ–º–µ—Ä –ø—Ä–µ—Ä–≤–∞–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –ø–æ–ª–µ `xmax`.
–ö–æ–≥–¥–∞ –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ–±—Ä–∞—Ç–∏—Ç—Å—è –∫ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ–∫–∏, –æ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ `101` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤ –≤–µ—Ä—Å–∏—é —Å—Ç—Ä–æ–∫–∏ **–ø—Ä–∏–∑–Ω–∞–∫-–ø–æ–¥—Å–∫–∞–∑–∫—É**, —á—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è **–æ–±–æ—Ä–≤–∞–Ω–∞**.
–≠—Ç–æ –±—É–¥–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å, —á—Ç–æ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–æ–ª–µ `xmax` **—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–µ –Ω—É–∂–Ω–æ**.

---




![alt text](image-11.png)



![alt text](image-12.png)



![alt text](image-13.png)



![alt text](image-14.png)



![alt text](image-15.png)



![alt text](image-16.png)



![alt text](image-17.png)



![alt text](image-18.png)



![alt text](image-19.png)



![alt text](image-20.png)



![alt text](image-21.png)
