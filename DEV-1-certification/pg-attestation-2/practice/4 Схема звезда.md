–û—Ç–ª–∏—á–Ω–æ! –°–æ–∑–¥–∞–¥–∏–º **–∑–≤—ë–∑–¥–Ω—É—é —Å—Ö–µ–º—É** (star schema) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∞–±–ª–∏—Ü—ã `Sell_Out`. –≠—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ:

* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ ‚Äî  **—Ñ–∞–∫—Ç (Fact table)** .
* –í–æ–∫—Ä—É–≥ –Ω–µ—ë ‚Äî  **–∏–∑–º–µ—Ä–µ–Ω–∏—è (Dimension tables)** .

---

## üìä **1. –¢–∞–±–ª–∏—Ü–∞ —Ñ–∞–∫—Ç–æ–≤: `Fact_Sell_Out`**

–°–æ–¥–µ—Ä–∂–∏—Ç **–º–µ—Ä—ã** –∏  **–∫–ª—é—á–∏ –≤–Ω–µ—à–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü** .

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:

```sql
CREATE TABLE Fact_Sell_Out (
    fact_id SERIAL PRIMARY KEY,
    sold_qty INTEGER,
    purchase_price NUMERIC,
    sold_date TIMESTAMP,
  
    partner_id INT,
    city_id INT,
    reference_code VARCHAR,
    client_id INT,

    FOREIGN KEY (partner_id) REFERENCES Dim_Partner(partner_id),
    FOREIGN KEY (city_id) REFERENCES Dim_City(city_id),
    FOREIGN KEY (reference_code) REFERENCES Dim_Product(reference_code),
    FOREIGN KEY (client_id) REFERENCES Dim_Client(client_id)
);
```

---

## üìê **2. –ò–∑–º–µ—Ä–µ–Ω–∏—è (dimensions)**

---

### üìÅ `Dim_Partner`

```sql
CREATE TABLE Dim_Partner (
    partner_id INT PRIMARY KEY,
    partner_name TEXT
);
```

---

### üåÜ `Dim_City`

(–û–±—ä–µ–¥–∏–Ω—è–µ—Ç **Sale city** –∏ **Client city** –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏, –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```sql
CREATE TABLE Dim_City (
    city_id SERIAL PRIMARY KEY,
    city_name TEXT,
    city_code INT
);
```

---

### üõí `Dim_Product`

```sql
CREATE TABLE Dim_Product (
    reference_code VARCHAR PRIMARY KEY
);
```

---

### üë§ `Dim_Client`

```sql
CREATE TABLE Dim_Client (
    client_id SERIAL PRIMARY KEY,
    inn_client TEXT UNIQUE,
    client_name TEXT,
    client_category TEXT,
    city_id INT,
  
    FOREIGN KEY (city_id) REFERENCES Dim_City(city_id)
);
```

---

## üîó **–°–≤—è–∑–∏**

–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∑–≤–µ–∑–¥–∞):

```
                     +-----------------+
                     |   Dim_Partner   |
                     +-----------------+
                            |
                            |
                            v
+----------------+     +-------------+     +------------------+
|  Dim_Product   | <-- | Fact_Sell_Out | --> |   Dim_Client     |
+----------------+     +-------------+     +------------------+
                            |
                            |
                            v
                     +-------------+
                     |  Dim_City   |
                     +-------------+
```

---

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π —Å—Ö–µ–º—ã:

* –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å (3–ù–§ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏–π).
* –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
* –ß—ë—Ç–∫–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ **—Ñ–∞–∫—Ç–æ–≤** –æ—Ç  **–∏–∑–º–µ—Ä–µ–Ω–∏–π** .

---
