# Практика 1.

1. В базе данных имеются таблицы пользователей и их заказов, связанные отношением «один ко многим». Напишите функцию, которая по идентификатору пользователя возвращает документ JSON, содержащий все сведения о пользователе вместе с массивом его заказов.

2. В пользовательском интерфейсе необходимо выводить названия городов, хранящиеся в базе данных, на выбранном языке. Один из способов — хранить все переводы названий в объекте JSON в виде пар «код языка — название». Реализуйте такой способ. Для удобства создайте представление, показывающее название городов на языке, заданном в конфигурационном параметре сервера.

1. Таблицы могут быть следующими:

```sql
CREATE TABLE users(
  id integer PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  name text
);

CREATE TABLE orders(
  id integer PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
  user_id integer REFERENCES users(id),
  amount numeric
);
````

Результат должен иметь вид:

```json
{
  "user_id": ...,
  "name": ...,
  "orders": [
    { "order_id": ..., "amount": ... },
    ...
  ]
}
```

Для того чтобы сформировать объект JSON из нескольких полей, воспользуйтесь функцией `jsonb_build_object`.

2. Название пользовательского конфигурационного параметра должно содержать точку в своем имени, например, `translation.lang`. Получить текущее значение параметра можно функцией `current_setting`.

