
# üõ°Ô∏è  –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –≤ PostgreSQL 16

---

## üîπ 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏ –≤ PostgreSQL

–í PostgreSQL **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ —Ä–æ–ª–∏** ‚Äî —ç—Ç–æ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ. –û–±—ä–µ–∫—Ç `ROLE` –º–æ–∂–µ—Ç:

* –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (–µ—Å–ª–∏ `LOGIN`)
* –±—ã—Ç—å **–≥—Ä—É–ø–ø–æ–π** –ø—Ä–∞–≤ (–µ—Å–ª–∏ –±–µ–∑ `LOGIN`)

### üéØ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
CREATE ROLE alice LOGIN PASSWORD 'secure_pass';
```

> `LOGIN` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è. –ë–µ–∑ –Ω–µ–≥–æ ‚Äî –ø—Ä–æ—Å—Ç–æ —Ä–æ–ª—å.

---

### üß∞ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–∏ (–≥—Ä—É–ø–ø—ã)

```sql
CREATE ROLE analysts;
```

–ü—Ä–∏–º–µ—Ä: –¥–æ–±–∞–≤–∏–º `alice` –≤ –≥—Ä—É–ø–ø—É `analysts`:

```sql
GRANT analysts TO alice;
```

–¢–µ–ø–µ—Ä—å Alice —É–Ω–∞—Å–ª–µ–¥—É–µ—Ç –≤—Å–µ –ø—Ä–∞–≤–∞, –≤—ã–¥–∞–Ω–Ω—ã–µ `analysts`.

---

## üîπ 2. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

–ü—Ä–∞–≤–∞ –º–æ–∂–Ω–æ –≤—ã–¥–∞—Ç—å –Ω–∞:

* **–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
* **—Å—Ö–µ–º—É**
* **—Ç–∞–±–ª–∏—Ü—É**
* **—Å—Ç–æ–ª–±–µ—Ü**
* **—Ñ—É–Ω–∫—Ü–∏—é**
* **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
* **–º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ** –∏ –¥—Ä.

---

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–∞–≤

| –ü—Ä–∞–≤–æ     | –û–±—ä–µ–∫—Ç                 | –û–ø–∏—Å–∞–Ω–∏–µ                            |
| --------- | ---------------------- | ----------------------------------- |
| `CONNECT` | –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö            | –†–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î          |
| `USAGE`   | —Å—Ö–µ–º–∞, —Ç–∏–ø—ã            | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `CREATE`  | –±–∞–∑–∞, —Å—Ö–µ–º–∞            | –†–∞–∑—Ä–µ—à–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã         |
| `SELECT`  | —Ç–∞–±–ª–∏—Ü–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ | –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö                       |
| `INSERT`  | —Ç–∞–±–ª–∏—Ü–∞                | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫                    |
| `UPDATE`  | —Ç–∞–±–ª–∏—Ü–∞, —Å—Ç–æ–ª–±–µ—Ü       | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫                    |
| `DELETE`  | —Ç–∞–±–ª–∏—Ü–∞                | –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫                      |
| `EXECUTE` | —Ñ—É–Ω–∫—Ü–∏—è                | –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏                       |

---

### üìå –ü—Ä–∏–º–µ—Ä—ã –≤—ã–¥–∞—á–∏ –ø—Ä–∞–≤

#### üîê –î–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ:

```sql
GRANT SELECT, INSERT ON orders TO alice;
```

#### üîê –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Å—Ç–æ–ª–±—Ü–∞–º:

```sql
GRANT SELECT(name, price) ON products TO alice;
```

#### üîê –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î:

```sql
GRANT CONNECT ON DATABASE shop TO alice;
```

#### üîê –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ö–µ–º—É:

```sql
GRANT USAGE ON SCHEMA public TO alice;
```

---

## üîí –û—Ç–∑—ã–≤ –ø—Ä–∞–≤

```sql
REVOKE INSERT ON orders FROM alice;
```

–ú–æ–∂–Ω–æ –æ—Ç–æ–∑–≤–∞—Ç—å –ø—Ä–∞–≤–∞ —É –≤—Å–µ—Ö:

```sql
REVOKE ALL ON orders FROM PUBLIC;
```

---

## üß± –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä–æ–ª–µ–π

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–æ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ:

```sql
CREATE ROLE analyst INHERIT;
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–∞–≤–∞ –æ—Ç –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π (–≥—Ä—É–ø–ø) –±—É–¥—É—Ç —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∞–≤

–ü—Ä–∞–≤–∞ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á–µ—Ä–µ–∑:

```sql
\du        -- —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π
\l         -- –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ—Å—Ç—É–ø
\dn+       -- —Å—Ö–µ–º—ã –∏ –¥–æ—Å—Ç—É–ø
\d+ table  -- –ø—Ä–∞–≤–∞ –Ω–∞ —Ç–∞–±–ª–∏—Ü—É
```

–ò–ª–∏ SQL-–∑–∞–ø—Ä–æ—Å–æ–º:

```sql
SELECT * FROM information_schema.role_table_grants
WHERE grantee = 'alice';
```

---

## üß™ –ü—Ä–∞–∫—Ç–∏–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: `manager` –∏ `operator`.
2. –î–∞–π—Ç–µ `manager` –ø—Ä–∞–≤–∞ `SELECT`, `INSERT`, `UPDATE` –Ω–∞ —Ç–∞–±–ª–∏—Ü—É `clients`.
3. –î–∞–π—Ç–µ `operator` —Ç–æ–ª—å–∫–æ `SELECT`.
4. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É `staff` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç—É–¥–∞ –æ–±–æ–∏—Ö.
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫–∏–µ –ø—Ä–∞–≤–∞ –µ—Å—Ç—å —É `operator`.

–•–æ—á–µ—à—å ‚Äî –º–æ–≥—É –≤—ã–¥–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ SQL-—Ä–µ—à–µ–Ω–∏—è –∏–ª–∏ —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏.

---

## üß† –í—ã–≤–æ–¥

* –í PostgreSQL —Ä–æ–ª–∏ = –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –≥—Ä—É–ø–ø—ã.
* –í—Å–µ –¥–æ—Å—Ç—É–ø—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `GRANT` –∏ `REVOKE`.
* –†–æ–ª–∏ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å, –¥–µ–ª–∞—è –≥–∏–±–∫–∏–µ —Å—Ö–µ–º—ã –¥–æ—Å—Ç—É–ø–∞.
* –õ—É—á—à–µ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –ø—Ä–∞–≤–∞ —á–µ—Ä–µ–∑ **–≥—Ä—É–ø–ø—ã**, –∞ –Ω–µ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–¥–µ–ª—å–Ω–æ.

