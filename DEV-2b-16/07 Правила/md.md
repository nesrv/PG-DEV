# –ü—Ä–∞–≤–∏–ª–∞ RULES



# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª–∞ (RULE) –≤ PostgreSQL

RULE –≤ PostgreSQL - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–¥ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º.

## –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è INSERT

–°–æ–∑–¥–∞–¥–∏–º —Ç–∞–±–ª–∏—Ü—É –∏ –ø—Ä–∞–≤–∏–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å—Ç–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –≤ –¥—Ä—É–≥—É—é —Ç–∞–±–ª–∏—Ü—É:

```sql

CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    price DECIMAL(10,2)
);


INSERT INTO products (name, price) VALUES 
('–ù–æ—É—Ç–±—É–∫', 75000),
('–ú–æ–Ω–∏—Ç–æ—Ä', 18000),
('–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞', 3500),
('–ú—ã—à—å', 2500),
('–ü—Ä–∏–Ω—Ç–µ—Ä', 12000);


CREATE TABLE products_log (
    id SERIAL PRIMARY KEY,
    product_id INT,
    action VARCHAR(10),
    action_time TIMESTAMP DEFAULT NOW()
);

-- –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –≤ products —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥
CREATE RULE log_insert AS ON INSERT TO products DO ALSO
INSERT INTO products_log (product_id, action) VALUES (NEW.id, 'INSERT');
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –≤ —Ç–∞–±–ª–∏—Ü—É products:
```sql
INSERT INTO products (name, price) VALUES ('Laptop', 999.99);
```
–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É products_log.

## –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –∑–∞–º–µ–Ω—ã DELETE

–°–æ–∑–¥–∞–¥–∏–º –ø—Ä–∞–≤–∏–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞–º–µ–Ω—è–µ—Ç —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–∏–º–∏—Ç–∞—Ü–∏—è "–º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è"):

```sql
-- –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–æ–ª–±–µ—Ü –¥–ª—è –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
ALTER TABLE products ADD COLUMN is_deleted BOOLEAN DEFAULT FALSE;

-- –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª–æ –∑–∞–º–µ–Ω—è—é—â–µ–µ DELETE –Ω–∞ UPDATE
CREATE RULE soft_delete AS ON DELETE TO products DO INSTEAD
UPDATE products SET is_deleted = TRUE WHERE id = OLD.id;
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏:
```sql
DELETE FROM products WHERE id = 1;
```
–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –∞ –Ω–µ —É–¥–∞–ª–µ–Ω–∏–µ.

## –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (VIEW)

–°–æ–∑–¥–∞–¥–∏–º –æ–±–Ω–æ–≤–ª—è–µ–º–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –ø—Ä–∞–≤–∏–ª:

```sql
-- –°–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    department VARCHAR(50),
    salary DECIMAL(10,2)
);

INSERT INTO employees (name, department, salary) VALUES
('–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á', '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è', 85000.50),
('–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞', '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥', 92000.00),
('–°–∏–¥–æ—Ä–æ–≤ –ê–ª–µ–∫—Å–µ–π –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á', 'IT-–æ—Ç–¥–µ–ª', 125000.75),
('–ö—É–∑–Ω–µ—Ü–æ–≤–∞ –ï–ª–µ–Ω–∞ –î–º–∏—Ç—Ä–∏–µ–≤–Ω–∞', '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥', 78000.00),
('–§–µ–¥–æ—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–Ω–∞', '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è', 87000.50),
('–ù–∏–∫–æ–ª–∞–µ–≤ –ê–Ω–¥—Ä–µ–π –ò–≥–æ—Ä–µ–≤–∏—á', 'IT-–æ—Ç–¥–µ–ª', 135000.00);

-- –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞
CREATE VIEW marketing_employees AS
SELECT id, name, salary FROM employees WHERE department = '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥';

-- –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π INSERT/UPDATE/DELETE —á–µ—Ä–µ–∑ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
CREATE RULE insert_marketing AS ON INSERT TO marketing_employees DO INSTEAD
INSERT INTO employees (name, department, salary) VALUES (NEW.name, 'Marketing', NEW.salary);

CREATE RULE update_marketing AS ON UPDATE TO marketing_employees DO INSTEAD
UPDATE employees SET name = NEW.name, salary = NEW.salary 
WHERE id = OLD.id AND department = '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥';

CREATE RULE delete_marketing AS ON DELETE TO marketing_employees DO INSTEAD
DELETE FROM employees WHERE id = OLD.id AND department = '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥';
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –∫–∞–∫ —Å –æ–±—ã—á–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π:
```sql
INSERT INTO marketing_employees (name, salary) VALUES ('–î–∂–æ–Ω –ë–∏–¥–æ–Ω', 50000);
UPDATE marketing_employees SET salary = 55000 WHERE name = '–î–∂–æ–Ω –ë–∏–¥–æ–Ω';
DELETE FROM marketing_employees WHERE name = '–î–∂–æ–Ω –ë–∏–¥–æ–Ω';
```

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –æ RULE:

1. –ü—Ä–∞–≤–∏–ª–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–∞, –∞ –Ω–µ –≤–æ –≤—Ä–µ–º—è –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
2. –ü—Ä–∞–≤–∏–ª–∞ –º–æ–≥—É—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–ª–æ–∂–Ω–∏—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Ç—Ä–∏–≥–≥–µ—Ä—ã (TRIGGER) –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ –ø—Ä–∞–≤–∏–ª
4. –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞

–ü—Ä–∞–≤–∏–ª–∞ - –º–æ—â–Ω—ã–π, –Ω–æ —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç PostgreSQL, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω –≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö.


## üß± –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞?

### ‚úî –ü–æ–¥—Ö–æ–¥–∏—Ç:

* –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è **"—É–º–Ω—ã—Ö" –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π**, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `INSERT`, `UPDATE`, `DELETE`.
* –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ **–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å** –∫ –¥—Ä—É–≥–æ–π —Ç–∞–±–ª–∏—Ü–µ.
* –î–ª—è **–∏—Å—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** –∏–ª–∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**.

### ‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

* –î–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏, –≥–¥–µ –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥—è—Ç **—Ç—Ä–∏–≥–≥–µ—Ä—ã**.
* –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, AFTER —Ç—Ä–∏–≥–≥–µ—Ä—ã).
* –ï—Å–ª–∏ –≤–∞–∂–µ–Ω **–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ä—è–¥–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è** ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –º–µ–Ω–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã.

---

## üìö –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–∞–≤–∏–ª–∞ ‚Äî –º–æ—â–Ω—ã–π, –Ω–æ —É—Å—Ç–∞—Ä–µ–≤–∞—é—â–∏–π –º–µ—Ö–∞–Ω–∏–∑–º. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Å–µ–π—á–∞—Å **–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã**, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, **–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π** –ø—Ä–∞–≤–∏–ª–∞ –æ—Å—Ç–∞—é—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —Å–¥–µ–ª–∞—Ç—å `VIEW` ¬´–æ–±–Ω–æ–≤–ª—è–µ–º—ã–º¬ª –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `INSTEAD OF` —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ (–∫–æ—Ç–æ—Ä—ã–µ PostgreSQL –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é).

–ù–∏–∂–µ ‚Äî –ø—Ä–∏–º–µ—Ä ¬´—É–º–Ω–æ–≥–æ¬ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤ PostgreSQL —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `SELECT`, `INSERT`, `UPDATE` –∏ `DELETE` —á–µ—Ä–µ–∑ **–ø—Ä–∞–≤–∏–ª–∞ (`RULE`)**, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ *–ø–æ—á—Ç–∏ –∫–∞–∫ —Ç–∞–±–ª–∏—Ü—É*.

---

## üß© –ó–∞–¥–∞—á–∞

–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞ —Å –∑–∞–∫–∞–∑–∞–º–∏:

```sql
CREATE TABLE orders (
  id serial PRIMARY KEY,
  customer text,
  amount numeric,
  is_public boolean DEFAULT false
);
```

–¢–µ–ø–µ—Ä—å –º—ã —Ö–æ—Ç–∏–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ **—Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–º –∑–∞–∫–∞–∑–∞–º** –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ `public_orders`, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–∑–≤–æ–ª–∏—Ç—å:

* —á–∏—Ç–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ –∑–∞–∫–∞–∑—ã (`SELECT`)
* –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø—É–±–ª–∏—á–Ω—ã–µ (`INSERT`)
* —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ –∑–∞–∫–∞–∑—ã (`UPDATE`)
* —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω—ã–µ –∑–∞–∫–∞–∑—ã (`DELETE`)

---

## üõ† –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

```sql
CREATE VIEW public_orders AS
SELECT id, customer, amount
FROM orders
WHERE is_public = true;
```

---

## üîÅ –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª–∞

### INSERT

```sql
CREATE RULE public_orders_insert AS
ON INSERT TO public_orders
DO INSTEAD
INSERT INTO orders (customer, amount, is_public)
VALUES (NEW.customer, NEW.amount, true);
```

> –õ—é–±–∞—è –≤—Å—Ç–∞–≤–∫–∞ —á–µ—Ä–µ–∑ `public_orders` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç `is_public = true`.

---

### UPDATE

```sql
CREATE RULE public_orders_update AS
ON UPDATE TO public_orders
DO INSTEAD
UPDATE orders
SET customer = NEW.customer,
    amount = NEW.amount
WHERE id = OLD.id AND is_public = true;
```

---

### DELETE

```sql
CREATE RULE public_orders_delete AS
ON DELETE TO public_orders
DO INSTEAD
DELETE FROM orders
WHERE id = OLD.id AND is_public = true;
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

```sql
-- –î–æ–±–∞–≤–∏–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:
INSERT INTO public_orders (customer, amount) VALUES ('Alice', 100);

-- –ü–æ—Å–º–æ—Ç—Ä–∏–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:
SELECT * FROM public_orders;
-- => –í—ã–≤–æ–¥: id | customer | amount

-- –û–±–Ω–æ–≤–∏–º –∑–∞–∫–∞–∑:
UPDATE public_orders SET amount = 120 WHERE customer = 'Alice';

-- –£–¥–∞–ª–∏–º –∑–∞–∫–∞–∑:
DELETE FROM public_orders WHERE customer = 'Alice';
```

---

## üí° –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º?

PostgreSQL, –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ `public_orders`, –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–ø—Ä—è–º—É—é —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –±–ª–∞–≥–æ–¥–∞—Ä—è `RULE`, –æ–Ω:

* –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `INSERT`, `UPDATE`, `DELETE` –∫ —Ç–∞–±–ª–∏—Ü–µ `orders`
* –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–ª—å–∫–æ –Ω–∞ `is_public = true`

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

* –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `RETURNING` —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏.
* –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `BEFORE/AFTER` –ª–æ–≥–∏–∫–æ–π ‚Äî –µ—Å–ª–∏ –æ–Ω–∞ –Ω—É–∂–Ω–∞, –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ —Ç–∞–±–ª–∏—Ü–µ.
* –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ, **–∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è** (–µ—Å–ª–∏ –µ—Å—Ç—å `INSTEAD`).

---

## üìö –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–∞–∫–æ–π ¬´—É–º–Ω—ã–π¬ª view —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç:

* –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —á–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
* –ü–æ–∑–≤–æ–ª–∏—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ
* –†–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –∫–∞–∫ —Å –æ–±—ã—á–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π

